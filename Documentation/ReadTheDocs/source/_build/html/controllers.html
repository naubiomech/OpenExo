<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Controllers &#8212; OpenExo Documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
    <link rel="stylesheet" type="text/css" href="_static/basic_mod.css?v=9b2032db" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css?v=0ac4fbd8" />
    <script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <script src="_static/js/petite-vue.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Ankle" href="ankle.html" />
    <link rel="prev" title="Add Documentation" href="AddingNewPages.html" /> 
  </head><body data-dark_mode_code_blocks="true">

<div id="top_nav">
    

    <nav>
        
            
        

        <p id="toggle_sidebar">
            <a href="#" title="Toggle sidebar">|||</a>
        </p>
        <h1><a href="index.html" title="Go to homepage">OpenExo</a></h1>

        <a id="mode_toggle" href="#" @click.prevent="handleClick" :title="mode">
    <template v-if="mode == 'light'">
        <svg width="100%" height="100%" viewBox="0 0 79 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g id="mode_light"><rect id="Bounds" x="0" y="-0" width="78.623" height="79.049" style="fill:none;"/><circle cx="39.311" cy="39.524" r="15.734" style="fill:#fff;"/><g id="beams"><g id="beam"><path id="beam1" serif:id="beam" d="M44.212,4.901c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.9,2.196 -4.9,4.901l-0,9.614c-0,2.705 2.196,4.901 4.9,4.901c2.705,0 4.901,-2.196 4.901,-4.901l0,-9.614Z" style="fill:#fff;"/></g><g id="beam2" serif:id="beam"><path id="beam3" serif:id="beam" d="M67.48,18.073c1.913,-1.912 1.913,-5.018 0,-6.931c-1.912,-1.912 -5.018,-1.912 -6.931,0l-6.798,6.799c-1.912,1.912 -1.912,5.018 0,6.931c1.913,1.912 5.018,1.912 6.931,-0l6.798,-6.799Z" style="fill:#fff;"/></g><g id="beam4" serif:id="beam"><path id="beam5" serif:id="beam" d="M25.728,61.108c1.912,-1.913 1.912,-5.018 -0,-6.931c-1.913,-1.913 -5.019,-1.913 -6.931,-0l-6.799,6.798c-1.912,1.913 -1.912,5.019 0,6.931c1.913,1.913 5.019,1.913 6.931,0l6.799,-6.798Z" style="fill:#fff;"/></g><g id="beam6" serif:id="beam"><path id="beam7" serif:id="beam" d="M60.682,54.177c-1.913,-1.913 -5.018,-1.913 -6.931,-0c-1.912,1.913 -1.912,5.018 0,6.931l6.798,6.798c1.913,1.913 5.019,1.913 6.931,0c1.913,-1.912 1.913,-5.018 0,-6.931l-6.798,-6.798Z" style="fill:#fff;"/></g><g id="beam8" serif:id="beam"><path id="beam9" serif:id="beam" d="M4.901,34.623c-2.705,0 -4.901,2.196 -4.901,4.901c0,2.705 2.196,4.901 4.901,4.901l9.614,0c2.705,0 4.901,-2.196 4.901,-4.901c0,-2.705 -2.196,-4.901 -4.901,-4.901l-9.614,0Z" style="fill:#fff;"/></g><g id="beam10" serif:id="beam"><path id="beam11" serif:id="beam" d="M44.212,64.534c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.9,2.196 -4.9,4.901l-0,9.614c-0,2.705 2.196,4.901 4.9,4.901c2.705,-0 4.901,-2.196 4.901,-4.901l0,-9.614Z" style="fill:#fff;"/></g><g id="beam12" serif:id="beam"><path id="beam13" serif:id="beam" d="M18.929,11.142c-1.912,-1.912 -5.018,-1.912 -6.931,0c-1.912,1.913 -1.912,5.019 0,6.931l6.799,6.799c1.912,1.912 5.018,1.912 6.931,-0c1.912,-1.913 1.912,-5.019 -0,-6.931l-6.799,-6.799Z" style="fill:#fff;"/></g><g id="beam14" serif:id="beam"><path id="beam15" serif:id="beam" d="M64.108,34.623c-2.705,0 -4.901,2.196 -4.901,4.901c-0,2.705 2.196,4.901 4.901,4.901l9.614,0c2.705,0 4.901,-2.196 4.901,-4.901c-0,-2.705 -2.196,-4.901 -4.901,-4.901l-9.614,0Z" style="fill:#fff;"/></g></g></g></svg>
    </template>

    <template v-if="mode == 'dark'">
        <svg width="100%" height="100%" viewBox="0 0 79 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g id="mode_dark"><rect id="Bounds" x="0" y="-0" width="78.623" height="79.049" style="fill:none;"/><circle cx="39.311" cy="39.524" r="15.734" style="fill:#fff;"/><g id="beams"><g id="beam"><path id="beam1" serif:id="beam" d="M44.212,14.515c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,0 -4.901,2.196 -4.901,4.901c0,2.705 2.197,4.901 4.901,4.901c2.705,0 4.901,-2.196 4.901,-4.901Z" style="fill:#fff;"/></g><g id="beam2" serif:id="beam"><path id="beam3" serif:id="beam" d="M60.662,24.892c1.902,-1.902 1.902,-4.99 0,-6.892l-0.04,-0.039c-1.901,-1.902 -4.989,-1.902 -6.891,-0c-1.901,1.901 -1.901,4.989 0,6.891l0.04,0.04c1.902,1.901 4.989,1.901 6.891,-0Z" style="fill:#fff;"/></g><g id="beam4" serif:id="beam"><path id="beam5" serif:id="beam" d="M25.732,61.103c1.91,-1.91 1.91,-5.011 0,-6.921l-0.009,-0.01c-1.91,-1.91 -5.012,-1.91 -6.921,-0c-1.91,1.91 -1.91,5.011 -0,6.921l0.01,0.01c1.909,1.91 5.011,1.91 6.92,-0Z" style="fill:#fff;"/></g><g id="beam6" serif:id="beam"><path id="beam7" serif:id="beam" d="M60.672,54.167c-1.907,-1.907 -5.004,-1.907 -6.911,0l-0.02,0.02c-1.907,1.907 -1.907,5.004 0,6.911c1.907,1.907 5.004,1.907 6.911,-0l0.02,-0.02c1.907,-1.907 1.907,-5.004 0,-6.911Z" style="fill:#fff;"/></g><g id="beam8" serif:id="beam"><path id="beam9" serif:id="beam" d="M14.52,34.623c-2.702,0 -4.896,2.194 -4.896,4.896l0,0.01c0,2.702 2.194,4.896 4.896,4.896c2.702,0 4.896,-2.194 4.896,-4.896l-0,-0.01c-0,-2.702 -2.194,-4.896 -4.896,-4.896Z" style="fill:#fff;"/></g><g id="beam10" serif:id="beam"><path id="beam11" serif:id="beam" d="M44.212,64.534c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.901,2.196 -4.901,4.901c0,2.704 2.197,4.9 4.901,4.9c2.705,0 4.901,-2.196 4.901,-4.9Z" style="fill:#fff;"/></g><g id="beam12" serif:id="beam"><path id="beam13" serif:id="beam" d="M25.73,17.943c-1.911,-1.911 -5.015,-1.911 -6.926,0l-0.005,0.005c-1.911,1.911 -1.911,5.015 0,6.926c1.911,1.911 5.015,1.911 6.926,0l0.005,-0.005c1.911,-1.911 1.911,-5.014 -0,-6.926Z" style="fill:#fff;"/></g><g id="beam14" serif:id="beam"><path id="beam15" serif:id="beam" d="M64.098,34.623c-2.699,0 -4.891,2.192 -4.891,4.892l-0,0.019c-0,2.699 2.192,4.891 4.891,4.891c2.7,0 4.892,-2.192 4.892,-4.891l0,-0.019c0,-2.7 -2.192,-4.892 -4.892,-4.892Z" style="fill:#fff;"/></g></g></g></svg>
    </template>

    <template v-if="mode == 'darkest'">
        <svg width="100%" height="100%" viewBox="0 0 79 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g id="mode_darkest"><rect id="Bounds" x="0" y="-0" width="78.623" height="79.049" style="fill:none;"/><path d="M39.315,23.791c8.684,-0 15.734,7.05 15.734,15.733c0,8.684 -7.05,15.734 -15.734,15.734c-8.683,0 -15.733,-7.05 -15.733,-15.734c-0,-8.683 7.05,-15.733 15.733,-15.733Zm0,4.737c6.069,0 10.997,4.927 10.997,10.996c-0,6.069 -4.928,10.996 -10.997,10.996c-6.068,0 -10.996,-4.927 -10.996,-10.996c0,-6.069 4.928,-10.996 10.996,-10.996Z" style="fill:#fff;"/><g id="beams"><g id="beam"><path id="beam1" serif:id="beam" d="M44.216,14.515c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,0 -4.9,2.196 -4.9,4.901c-0,2.705 2.196,4.901 4.9,4.901c2.705,0 4.901,-2.196 4.901,-4.901Z" style="fill:#fff;"/></g><g id="beam2" serif:id="beam"><path id="beam3" serif:id="beam" d="M60.666,24.892c1.902,-1.902 1.902,-4.99 0,-6.892l-0.04,-0.039c-1.901,-1.902 -4.989,-1.902 -6.891,-0c-1.901,1.901 -1.901,4.989 0,6.891l0.04,0.04c1.902,1.901 4.99,1.901 6.891,-0Z" style="fill:#fff;"/></g><g id="beam4" serif:id="beam"><path id="beam5" serif:id="beam" d="M25.737,61.103c1.909,-1.91 1.909,-5.011 -0,-6.921l-0.01,-0.01c-1.91,-1.91 -5.011,-1.91 -6.921,-0c-1.91,1.91 -1.91,5.011 -0,6.921l0.01,0.01c1.91,1.91 5.011,1.91 6.921,-0Z" style="fill:#fff;"/></g><g id="beam6" serif:id="beam"><path id="beam7" serif:id="beam" d="M60.676,54.167c-1.907,-1.907 -5.004,-1.907 -6.911,0l-0.02,0.02c-1.907,1.907 -1.907,5.004 0,6.911c1.907,1.907 5.004,1.907 6.911,-0l0.02,-0.02c1.907,-1.907 1.907,-5.004 0,-6.911Z" style="fill:#fff;"/></g><g id="beam8" serif:id="beam"><path id="beam9" serif:id="beam" d="M14.524,34.623c-2.702,0 -4.896,2.194 -4.896,4.896l0,0.01c0,2.702 2.194,4.896 4.896,4.896c2.702,0 4.896,-2.194 4.896,-4.896l0,-0.01c0,-2.702 -2.194,-4.896 -4.896,-4.896Z" style="fill:#fff;"/></g><g id="beam10" serif:id="beam"><path id="beam11" serif:id="beam" d="M44.216,64.534c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.9,2.196 -4.9,4.901c-0,2.704 2.196,4.9 4.9,4.9c2.705,0 4.901,-2.196 4.901,-4.9Z" style="fill:#fff;"/></g><g id="beam12" serif:id="beam"><path id="beam13" serif:id="beam" d="M25.734,17.943c-1.911,-1.911 -5.015,-1.911 -6.926,0l-0.005,0.005c-1.911,1.911 -1.911,5.015 0,6.926c1.911,1.911 5.015,1.911 6.926,0l0.005,-0.005c1.911,-1.911 1.911,-5.014 0,-6.926Z" style="fill:#fff;"/></g><g id="beam14" serif:id="beam"><path id="beam15" serif:id="beam" d="M64.103,34.623c-2.7,0 -4.892,2.192 -4.892,4.892l-0,0.019c-0,2.699 2.192,4.891 4.892,4.891c2.699,0 4.891,-2.192 4.891,-4.891l0,-0.019c0,-2.7 -2.192,-4.892 -4.891,-4.892Z" style="fill:#fff;"/></g></g></g></svg>
    </template>
</a>

<script>
(function() {
    const LOCAL_STORAGE_KEY = 'piccoloThemeMode'

    var initialMode = localStorage.getItem(LOCAL_STORAGE_KEY)

    if (initialMode) {
        // Make sure the value in local storage is valid
        if (['light', 'dark', 'darkest'].indexOf(initialMode) == -1) {
            initialMode = 'light'
            localStorage.setItem(LOCAL_STORAGE_KEY, initialMode)
        }
    } else {
        // Check if the client prefers dark mode
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            initialMode = 'dark'
        } else {
            initialMode = 'light'
        }
        localStorage.setItem(LOCAL_STORAGE_KEY, initialMode)
    }

    document.documentElement.dataset.mode = initialMode

    PetiteVue.createApp({
        'mode': initialMode,
        handleClick() {
            let currentMode = this.mode

            if (currentMode == 'light') {
                this.mode = 'dark'
            } else if (currentMode == 'dark') {
                this.mode = 'darkest'
            } else if (currentMode == 'darkest') {
                this.mode = 'light'
            }

            document.documentElement.dataset.mode = this.mode
            localStorage.setItem(LOCAL_STORAGE_KEY, this.mode)

            console.log(this.mode)
        }
    }).mount('#mode_toggle')
})()
</script>
            <p class="mobile_search_link">
                <a href="search.html" title="Search">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 65 64" fill-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="2">
                        <path d="M14.873 40.009c-2.315-3.943-3.642-8.532-3.642-13.429C11.231 11.91 23.141 0 37.811 0s26.58 11.91 26.58 26.58-11.91 26.58-26.58 26.58a26.44 26.44 0 0 1-14.277-4.161L9.739 62.794a3.12 3.12 0 0 1-4.413 0L.913 58.382c-1.217-1.218-1.217-3.196 0-4.413l13.96-13.96zM37.811 8.054c10.225 0 18.526 8.301 18.526 18.526s-8.301 18.526-18.526 18.526-18.526-8.301-18.526-18.526S27.586 8.054 37.811 8.054z" fill="#fff" />
                    </svg>
                </a>
            </p>
        

        <div class="searchbox_wrapper">
            
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
    </nav>
</div>

    
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper"><p class="caption" role="heading"><span class="caption-text">Tutorials:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="User_Guide.html">Background Info</a></li>
<li class="toctree-l1"><a class="reference internal" href="FirstTimeStartUp.html">First Time Startup</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="addingelements.html">Adding Elements</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Controllers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ankle.html">Ankle</a></li>
<li class="toctree-l2"><a class="reference internal" href="hip.html">Hip</a></li>
<li class="toctree-l2"><a class="reference internal" href="elbow.html">Elbow</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="gui.html">OpenExo GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="gamification_template.html">Gamification Template</a></li>
<li class="toctree-l1"><a class="reference internal" href="StyleGuide.html">OpenExo C++ Style Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="AddingNewPages.html">Add Documentation</a></li>
</ul>

        </div>
      </div>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="controllers">
<h1>Controllers<a class="headerlink" href="#controllers" title="Link to this heading">¶</a></h1>
<p>Overview of Controllers. Here we present the controllers capable of use by multiple joints.</p>
<div class="toctree-wrapper compound">
<p class="caption" role="heading"><span class="caption-text">Joint-Specific Controllers:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="ankle.html">Ankle</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ProportionalJointMoment.html">Proportional Joint Moment Controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="TREC.html">Terrain Responsive Exoskeleton Controller (TREC)</a></li>
<li class="toctree-l2"><a class="reference internal" href="ZhangCollins.html">Zhang Collins Controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="SPV2.html">SPV2</a></li>
<li class="toctree-l2"><a class="reference internal" href="PJMC_Plus.html">PJMC_Plus</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="hip.html">Hip</a><ul>
<li class="toctree-l2"><a class="reference internal" href="FranksCollinsHip.html">Franks Collins Hip Controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="ProportionalHipMomentController.html">Proportional Hip Moment Controller</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="elbow.html">Elbow</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ElbowMinMax.html">Elbow Min Max Controller</a></li>
</ul>
</li>
</ul>
</div>
<section id="calibration-manager-controller">
<h2>Calibration Manager Controller<a class="headerlink" href="#calibration-manager-controller" title="Link to this heading">¶</a></h2>
<p><strong>Description</strong>
This controller applies a small, constant torque while printing statements of relevance (command value/sign, torque sensor value/sign, angle sensor value/sign) to the Arduino Serial Monitor.</p>
<p><strong>Parameters</strong>
There are no user-defined parameters associated with this controller.</p>
<p><strong>Purposes</strong>
After you have built an exo, one of the first things to check is the motor directions and the signs (positive/negative) of any of your external sensors (torque, angle, etc.).
Having correct motor directions is important as it allows the exo controller designers to focus on the control itself, knowing that, if calibrated properly before use, the exo assistance will always be in the designed directions.
The same principle applies for the sensors involved with control. Since PID control is implemented in many of our exo controllers, it is <strong>crucial</strong> to make sure that the directions match.
This article will elaborate how to conduct the direction calibration using the CalibrManager controller.
On each exo, this calibration process only needs to be done <strong>once</strong>, its results will need to be <strong>manually</strong> saved on the SD card and will be loaded <strong>automatically</strong> every time the exo starts up.</p>
<p><strong>Motor Directions</strong>
When designing a controller, the values returned from the “calc_motor_cmd()” function determines the motor torque command (feedforward). To ease the controller design process, we propose that controller designers follow the following direction definitions for torque commands:</p>
<ul class="simple">
<li><p><strong>Ankle Joints:</strong> Positive for Dorsiflexion, and negative for Plantarflexion</p></li>
<li><p><strong>Knee Joints:</strong> Positive for Extension, and negative for Flexion</p></li>
<li><p><strong>Hip Joints:</strong> Positve for Flexion, and negative for Extension</p></li>
<li><p><strong>Elbow joints:</strong> Positive for Flexion, and negative for Extension</p></li>
</ul>
<p>In summary, this <strong>follows the right-hand rule</strong>.</p>
<p><strong>Torque Sensor Signs (Positive/Negative)</strong>
Following the motor direction definitions, we need to verify that, when the motor supplies a positive torque command, the torque sensors, when zeroed properly, also returns a positive reading when the motor shaft is not spinning.</p>
<p><strong>How to Calibrate</strong></p>
<ol class="arabic simple">
<li><p>Set Calibration Manager as the default controller for the current exo.</p></li>
<li><p>Connect the Teensy to a computer through USB and open up the Arduino Serial monitor.</p></li>
<li><p>Connect the exo to the python GUI.</p></li>
<li><p>Power on the exo and start a new session.</p></li>
<li><p>Make sure you are securly holding the joint of interest (either with your hand or worn on your body) so that it can not freely move. If left unsecured the joint will actuate upon start which could cause injury.</p></li>
<li><p>Upon start, the Calibration Manager will send a positive torque command (3.5 Nm by default) to each motor.</p></li>
<li><p>Feel the direction that the torque is trying to actuate.</p></li>
<li><p>If the torque is not rotating in the positive direction (see above for the specific directions), power off the device, remove the SD Card, and flip the motor direction to its correct direction by modifying the appropriate “JointFlipMotorDir” in “Config.ini”.</p></li>
<li><p>After modifying all motor directions (if needed), start the test over again [once again making sure the device is secured], and this time focus on the sensor readings (e.g., torque, angle) shown on the Arduino Serial Monitor.</p></li>
<li><p>Again feel the direction that the torque is trying to actuate (it should now match the definitions above).</p></li>
<li><p>Now try to manually move the joint back to its neutral position (e.g., move the hip upright away from a flexed position into a neutral position).</p></li>
<li><p>If the corresponding sensor does not return a postive value, you will need to modify the SD card to flip the sensor direction.</p></li>
<li><p>Again, power off the device, remove the SD card, and flip the sensor direction by modifying the approriate “JointFlipSensorDir” in “Config.ini”.</p></li>
</ol>
</section>
<section id="chirp-controller">
<h2>Chirp Controller<a class="headerlink" href="#chirp-controller" title="Link to this heading">¶</a></h2>
<p><strong>Description</strong>
This controller applies a user defined sine wave that increases in frequency at a set rate. This can be used to characterize the bandwidth of the system.</p>
<p><strong>Parameters</strong>
Parameter index order can be found in <a class="reference external" href="https://github.com/naubiomech/OpenExo/blob/main/ExoCode/src/ControllerData.h">ControllerData.h</a>.</p>
<ul class="simple">
<li><p><strong>amplitude</strong>: Amplitude, in Nm, of the torque sine wave.</p></li>
<li><p><strong>start_frequency</strong>: Starting frequency for the chirp</p></li>
<li><p><strong>end_frequency</strong>: Ending frequency for the chirp</p></li>
<li><p><strong>duration</strong>: The duration that you want the chirp to be applied</p></li>
<li><p><strong>yshift</strong>: Shifts the center of the chirp if you want it to be something other than zero</p></li>
<li><p><strong>use_pid</strong>: This flag turns PID on(1) or off(0)</p></li>
<li><p><strong>p_gain</strong>: Proportional gain for closed loop control</p></li>
<li><p><strong>i_gain</strong>: Integral gain for closed loop control</p></li>
<li><p><strong>d_gain</strong>: Derivative gain for closed loop control</p></li>
</ul>
</section>
<section id="constant-torque-controller">
<h2>Constant Torque Controller<a class="headerlink" href="#constant-torque-controller" title="Link to this heading">¶</a></h2>
<p><strong>Description</strong>
This controller attempts to apply a constant torque to the joint. This can be done with or without closed loop control.</p>
<p><strong>Parameters</strong>
Parameter index order can be found in <a class="reference external" href="https://github.com/naubiomech/OpenExo/blob/main/ExoCode/src/ControllerData.h">ControllerData.h</a>.</p>
<ul class="simple">
<li><p><strong>amplitude</strong>: Magnitude of the applied torque, in Nm</p></li>
<li><p><strong>direction</strong>: Flag to flip the direction of the applied torque</p></li>
<li><p><strong>alpha</strong>: Filtering term for exponentially wieghted moving average (EWMA) filter, used on torque sensor to cut down on noise. The lower this value the higher the delay caused by the filtering.</p></li>
<li><p><strong>use_pid</strong>: This flag turns PID on(1) or off(0)</p></li>
<li><p><strong>p_gain</strong>: Proportional gain for closed loop control</p></li>
<li><p><strong>i_gain</strong>: Integral gain for closed loop control</p></li>
<li><p><strong>d_gain</strong>: Derivative gain for closed loop control</p></li>
</ul>
</section>
<section id="step-controller">
<h2>Step Controller<a class="headerlink" href="#step-controller" title="Link to this heading">¶</a></h2>
<p><strong>Description</strong>
This controller attempts to apply a constant torque at the joint for a set duration and for a set number of times.</p>
<p><strong>Parameters</strong>
Parameter index order can be found in <a class="reference external" href="https://github.com/naubiomech/OpenExo/blob/main/ExoCode/src/ControllerData.h">ControllerData.h</a>.</p>
<ul class="simple">
<li><p><strong>amplitude</strong>: Magnitude of the applied torque, in Nm</p></li>
<li><p><strong>duration</strong>: Duration of the applied torque</p></li>
<li><p><strong>repetitions</strong>: Number of times the torque is applied</p></li>
<li><p><strong>spacing</strong>: Time between each application of torque</p></li>
<li><p><strong>use_pid</strong>: This flag turns PID on(1) or off(0)</p></li>
<li><p><strong>p_gain</strong>: Proportional gain for closed loop control</p></li>
<li><p><strong>i_gain</strong>: Integral gain for closed loop control</p></li>
<li><p><strong>d_gain</strong>: Derivative gain for closed loop control</p></li>
<li><p><strong>alpha</strong>: Filtering term for exponentially wieghted moving average (EWMA) filter, used on torque sensor to cut down on noise.</p></li>
</ul>
</section>
<section id="zero-torque-controller">
<h2>Zero Torque Controller<a class="headerlink" href="#zero-torque-controller" title="Link to this heading">¶</a></h2>
<p><strong>Description</strong>
This controller attempts to regulate the joint so that the output torque is zero. It can be operated with or without closed-loop control.</p>
<p><strong>Parameters</strong>
Parameter index order can be found in <a class="reference external" href="https://github.com/naubiomech/OpenExo/blob/main/ExoCode/src/ControllerData.h">ControllerData.h</a>.</p>
<ul class="simple">
<li><p><strong>use_pid</strong>: This flag turns PID on(1) or off(0)</p></li>
<li><p><strong>p_gain</strong>: Proportional gain for closed loop control</p></li>
<li><p><strong>i_gain</strong>: Integral gain for closed loop control</p></li>
<li><p><strong>d_gain</strong>: Derivative gain for closed loop control</p></li>
</ul>
</section>
<section id="controller-subfolders-by-joint">
<h2>Controller Subfolders by Joint<a class="headerlink" href="#controller-subfolders-by-joint" title="Link to this heading">¶</a></h2>
<p>For implementation details specific to individual joints, refer to the subfolders for:</p>
<ul class="simple">
<li><p><strong>Ankle Controllers</strong></p></li>
<li><p><strong>Hip Controllers</strong></p></li>
<li><p><strong>Elbow Controllers</strong></p></li>
</ul>
<p>The subfolders (each with its own <code class="docutils literal notranslate"><span class="pre">index.rst</span></code> file) are linked above in the toctree. They provide additional documentation and examples for configuring and tuning controllers tailored to the specific dynamics of each joint.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
    
        <div id="show_right_sidebar">
            <p><a class="toggle_right_sidebar" href="#"><span class="icon">&lt;</span><span>Page contents</span></a></p>
        </div>

        <div id="right_sidebar">
            <p><a class="toggle_right_sidebar" href="#"><span class="icon">&gt;</span><span>Page contents:</span></a></p>
            <div class="page_toc">
                <ul>
<li><a class="reference internal" href="#">Controllers</a><ul>
<li><a class="reference internal" href="#calibration-manager-controller">Calibration Manager Controller</a></li>
<li><a class="reference internal" href="#chirp-controller">Chirp Controller</a></li>
<li><a class="reference internal" href="#constant-torque-controller">Constant Torque Controller</a></li>
<li><a class="reference internal" href="#step-controller">Step Controller</a></li>
<li><a class="reference internal" href="#zero-torque-controller">Zero Torque Controller</a></li>
<li><a class="reference internal" href="#controller-subfolders-by-joint">Controller Subfolders by Joint</a></li>
</ul>
</li>
</ul>

            </div>
        </div>
    

      <div class="clearer"></div>
    </div>
    <div class="button_nav_wrapper">
        <div class="button_nav">
            <div class="left">
                
                <a href="AddingNewPages.html">
                    <span class="icon">&lt;</span><span>Add Documentation</span></a>
                
            </div>

            <div class="right">
                
                    <a href="ankle.html"><span>Ankle</span><span class="icon">&gt;</span></a>
                
            </div>
        </div>
    </div>


    <div class="footer" role="contentinfo">
    &#169; Copyright 2025, Landon Coonrod, Jack Williams, and Prof. Zach Lerner.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    </div>

<p id="theme_credit">Styled using the <a href="https://github.com/piccolo-orm/piccolo_theme">Piccolo Theme</a></p>
  </body>
</html>